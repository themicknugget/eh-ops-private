# kube-actions-runner values for eh-ops-private
# Replaces gha-webhook-scaler deployment
### Config
config:
    # Runner mode: dind-rootless provides Docker support with user namespace isolation
    runnerMode: dind-rootless
    # Match all self-hosted jobs
    labelMatchers: self-hosted
    # TTL in seconds for completed runner Jobs (5 minutes)
    ttlSeconds: 300
    # Runner container image
    runnerImage: ghcr.io/actions/actions-runner:2.330.0
    # Docker-in-Docker sidecar image
    dindImage: docker:27-dind
    # PersistentVolumeClaim for GitHub Actions cache
    cachePvc: github-runner-cache
    # Registry mirror for faster image pulls via Spegel
    registryMirror: http://spegel.spegel.svc.cluster.local:5000
    # Node availability check - keep jobs queued if arch unavailable
    skipNodeCheck: false
### Webhook Auto-Registration
webhookAutoRegister:
    enabled: true
    webhookURL: https://github-runner.${DOMAIN1}/webhook
    syncInterval: 1h
### Secrets
secrets:
    #ENC[AES256_GCM,data:mIc+zHMXMMdSSy2927a1kYCxGtnB7mEjxPuhD5DWEItB5nLdJ3rU5OIVXyc=,iv:SrRG5NqVfYlMQqIgIknj6IWkwj7bKcTcB0pyTHO3v14=,tag:ZX5D915r+CeRqfbzOCB0Og==,type:comment]
    githubTokens:
        - owner: ENC[AES256_GCM,data:eDEUiAEm+OVtrSKyVw==,iv:jtrPPF5YDK1twnEZVfw7yGh/qLv4qNlPiOiHtJUIm1w=,tag:5jGrVg9IYD1M8J7NrWgmOg==,type:str]
          token: ENC[AES256_GCM,data:qv2nIzmTlvU0kpxkdxhjG25weYEFcxooVfsbqTY5cEd/n4Jhzd+/uw==,iv:HIZVIEUMeOdzbQxOy5YWlK57CCvljlUzt/3pU3+Ob1w=,tag:vk+xDLPe5JW3UnYwHjZ6JQ==,type:str]
        - owner: ENC[AES256_GCM,data:Z/gpYNfs2n9etot7D/b/,iv:SbmFIfIvgj6i5wqvyiF/NDxKrGM1CPjhDYC5BRf+3ts=,tag:MxMKW2SPbpG+N20JLv3OSA==,type:str]
          token: ENC[AES256_GCM,data:PfZ/cKn7CtelfYi+ZAX4znM6ArV4muJ4KgxE8PRFJ/DeAEG909LnqQ==,iv:YEfGlPimE034z9KjcVpDppTrT5buJQAmoALwjKCPZl0=,tag:AnNtDBAU7wnX736xRVLRww==,type:str]
### Resources
resources:
    limits:
        cpu: 500m
        memory: 512Mi
    requests:
        cpu: 100m
        memory: 128Mi
### Metrics
metrics:
    serviceMonitor:
        enabled: true
        interval: 30s
### Ingress handled externally via existing nginx ingress
# The webhook URL https://github-runner.${DOMAIN1}/webhook
# should route to the kube-actions-runner service
### Extra environment variables
extraEnv:
    - name: DOCKER_CACHE_REGISTRY
      value: docker-cache.github-runners:5000
sops:
    kms: []
    gcp_kms: []
    azure_kv: []
    hc_vault: []
    age:
        - recipient: age1va7h9cnqt2gfhvy0pj947wmmewlahvj9j4zyzfznkpp9erf8xawscgft7c
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBaZkpJeUZ6OWcwa08waVA1
            YTE2MHE5dnZBQ1RrM0E1cjk2MGZDc2NlSENFCm9NZytlRnVkM3VYWDlHWWNhaTAw
            N0lKdXJUeXhid3dHd2hYOHlNdVd5czgKLS0tIFdaUFpJdG9VTjdBeDE3ZHRoWmZ2
            aGozdkYvUmllSHJqUGxQSS9XQlNhK0EKYU86s142StKbzeRBBPZSSQwXRQuPu4BX
            ZQ8i1MRCY0Bb7eu/ruUeeN9bN1rs6jBqukcj05aLCMH/H67JZQR9Nw==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2026-02-24T23:21:33Z"
    mac: ENC[AES256_GCM,data:JTvvMXrckUxn5YqKsx0oa2e5OHPXVryunKBX0wz7jZT2fzTuM5R+zeJ2aii+RA/Q+ilAP+DXRl4HukK9RMrrjbVx+r0Pq8B1Cgs0R6R6zpnUGHkiBfMaspEqhvjBSQTe3y0S4vaDb/DS2HQmADIsdr6VmWufUAJI80DAucbmY2Y=,iv:kRzv2MjMMMeq0JhRi37bUgE35wpFb33PSbmHAeUUdnE=,tag:aQPqXuX5nXbEGnh5FWP2kw==,type:str]
    pgp: []
    encrypted_regex: ^(data|stringData|secrets|token|githubTokens?|.*Key|.*Auth.*)$
    version: 3.9.4
