---
# TunnelBinding exposes the Kubernetes API server via Cloudflare Tunnel
# Named to sort before external-gateway-binding so specific hostname matches first
apiVersion: networking.cfargotunnel.com/v1alpha1
kind: TunnelBinding
metadata:
  name: api-k8s-binding
  namespace: cloudflare-operator-system
subjects:
  - name: k8s-api
    spec:
      fqdn: k8s-api.${DOMAIN1}
      protocol: http2
      target: https://192.168.1.50:6443
      noTlsVerify: true
tunnelRef:
  kind: ClusterTunnel
  name: eh-ops-cluster
  disableDNSUpdates: false
